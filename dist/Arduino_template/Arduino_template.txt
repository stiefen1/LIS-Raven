#include <ArduinoBLE.h>
// *IMU libraries*

// BLE Service handling communication with computer
BLEService seeedService("13012F00-F8C3-4F4A-A8F4-15CD926DA146");

// *BLE Characteristics*

// *Declare variables to store datas*

// *IMU class and variables*

///////////////////////////////////////////////////A\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

/*******************************************************************************\
*                                                                               *
*                                                                               *
*                                                                               *
*                     YOUR CODE HERE FOR GLOBAL VARIABLES                       *
*                                                                               *
*                                                                               *
*                                                                               *
\*******************************************************************************/

///////////////////////////////////////////////////A\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

void setup() {
    Serial.begin(9600);
 
    // begin initialization
    if (!BLE.begin()) {
        Serial.println("STARTING BLE FAILED!");
        while (1);
    }

    // *Begin IMU*

    // *Set advertised local name and service UUID*
    BLE.setAdvertisedService(seeedService);
    
    // *Add characteristics to the service*

    // Add service
    BLE.addService(seeedService);

    // set the initial value to 0

///////////////////////////////////////////////////B\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    /*******************************************************************************\
    *                                                                               *
    *                                                                               *
    *                                                                               *
    *                            YOUR CODE HERE FOR SETUP                           *
    *                                                                               *
    *                                                                               *
    *                                                                               *
    \*******************************************************************************/

///////////////////////////////////////////////////B\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    // start advertising
    BLE.advertise();
    delay(100);
    Serial.println("#---------- Start Advertising -----------#");
}

void loop() {
    BLEDevice central = BLE.central();
    if (central) {
        while (central.connected()) {
            // *Read values*

            // *Read and write IMU values*
           
///////////////////////////////////////////////////C\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

            /*******************************************************************************\
            *                                                                               *
            *                                                                               *
            *                                                                               *
            *                     YOUR CODE HERE WITH BLE CONNECTION                        *
            *                                                                               *
            *                                                                               *
            *                                                                               *
            \*******************************************************************************/

///////////////////////////////////////////////////C\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

            delay(100); // Can be modified
        }
        central.disconnect(); // Disconnect from peripheral
    } 

    // *Read IMU values*

///////////////////////////////////////////////////D\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    /*******************************************************************************\
    *                                                                               *
    *                                                                               *
    *                                                                               *
    *                     YOUR CODE HERE WITHOUT BLE CONNECTION                     *
    *                                                                               *
    *                                                                               *
    *                                                                               *
    \*******************************************************************************/

///////////////////////////////////////////////////D\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    delay(100); // Can be modified
}